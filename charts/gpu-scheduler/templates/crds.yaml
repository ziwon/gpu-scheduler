apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: gpuclaims.gpu.scheduling
spec:
  group: gpu.scheduling
  scope: Namespaced
  names:
    plural: gpuclaims
    singular: gpuclaim
    kind: GpuClaim
    shortNames:
      - gclaim
  versions:
    - name: v1
      served: true
      storage: true
      schema:
        openAPIV3Schema:
          type: object
          properties:
            spec:
              type: object
              properties:
                selector:
                  type: object
                  properties:
                    matchLabels:
                      type: object
                      additionalProperties:
                        type: string
                devices:
                  type: object
                  required: ["count"]
                  properties:
                    count:
                      type: integer
                    policy:
                      type: string
                    preferIds:
                      type: array
                      items:
                        type: integer
                    exclusivity:
                      type: string
                topology:
                  type: object
                  properties:
                    mode:
                      type: string
                    minBandwidthGBps:
                      type: integer
                gangRef:
                  type: string
            status:
              type: object
              properties:
                phase:
                  type: string
                nodeName:
                  type: string
                gpuIds:
                  type: array
                  items:
                    type: integer
                allocated:
                  type: string
                message:
                  type: string
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: gpunodestatuses.gpu.scheduling
spec:
  group: gpu.scheduling
  scope: Cluster
  names:
    plural: gpunodestatuses
    singular: gpunodestatus
    kind: GpuNodeStatus
    shortNames:
      - gns
  versions:
    - name: v1
      served: true
      storage: true
      schema:
        openAPIV3Schema:
          type: object
          properties:
            spec:
              type: object
              properties:
                nodeName:
                  type: string
            status:
              type: object
              properties:
                total:
                  type: integer
                devices:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: integer
                      inUseBy:
                        type: array
                        items:
                          type: string
                      health:
                        type: string
                      bandwidthGBps:
                        type: integer
                      island:
                        type: string
